{% extends "base.html" %}

{% block title %}Accueil - Afata Consulting{% endblock %}

{% block content %}
<header class="relative flex flex-col md:flex-row items-center justify-center px-4 md:px-6 min-h-screen overflow-hidden bg-transparent text-white">


<a href="/" class="fixed -top-12 -left-10 z-20 flex items-center space-x-2">
  <img src="/static/afa4.png" 
       alt="AfaConsulting Logo"
       class="max-h-40 md:max-h-[240px] w-auto">
</a>

  <!-- Fond animé -->
   <!--<div class="absolute inset-0 bg-[url('/static/2.jpg')] bg-cover opacity-30"></div>-->

  <!-- Visuel -->
  <div class="relative z-10 flex-shrink-0 mb-6 md:mb-0 md:mr-12">
    <img src="static/profil3.png" alt="Photo de profil"
         class="w-32 sm:w-40 md:w-[19rem] drop-shadow-2xl rounded-full">
  </div>

  <!-- Texte -->
  <div class="relative z-10 max-w-md md:max-w-xl text-center md:text-left">
    <h1 class="text-2xl sm:text-3xl md:text-6xl font-bold leading-tight mb-3 md:mb-4">
      Architecte Data Microsoft Fabric, Azure & Power BI
    </h1>
    <p class="font-semibold uppercase tracking-wide mb-2" style="color:#4dd1dd">
      Expertise
    </p>
    <p class="text-sm sm:text-base md:text-lg leading-relaxed text-gray-300 mb-6 md:mb-8">
      Avec <span class="font-semibold text-white">10 ans d'expertise</span> dans la data Microsoft, 
      je conçois des plateformes cloud modernes — 
      <span class="font-semibold text-white">Fabric, Azure & Power BI</span> — 
      pour répondre aux enjeux techniques et stratégiques de mes clients.
    </p>

<a href="#path" class="border px-4 py-2 md:px-6 md:py-3 rounded-full transition text-sm sm:text-base"
   style="border-color:#bb00ff; color:#bb00ff"
   onmouseover="this.style.backgroundColor='#bb00ff'; this.style.color='white';"
   onmouseout="this.style.backgroundColor='transparent'; this.style.color='#bb00ff';">
  Découvrir mon parcours →
</a>
  </div>
</header>




{% include "path.html" %}
{% include "services_responsive.html" %}
{% include "technos.html" %}
{% include "certifications_responsive.html" %}
{% include "references.html" %}

<!-- Footer -->
<footer class="bg-[#0b0b0b] border-t border-white/10 shadow-[0_0_10px_#ffffff10] text-white py-4 md:py-8">

  <div class="max-w-7xl mx-auto px-4 md:px-6 flex flex-col md:flex-row items-center justify-between gap-3 md:gap-6">
    <div class="flex items-center space-x-2">
      <img src="/static/svg/linkedin.svg" alt="LinkedIn" class="h-5 w-5">
      <a href="https://www.linkedin.com/in/anas-fata-28212a85/"
         target="_blank"
         rel="noopener noreferrer"
         class="text-white font-sans font-semibold tracking-tight hover:underline">
        LinkedIn
      </a>
    </div>
<a href="{{ url_for('contact') }}" 
   class="text-xs text-gray-300 transition duration-300 ease-out 
          hover:text-white hover:-translate-y-0.5 hover:scale-105"
   style="text-decoration: none;">
  Contactez-moi
</a>
  </div>
  <div class="mt-4 md:mt-6 text-center text-xs text-gray-500">
    &copy; 2025 Afata Consulting • Tous droits réservés
  </div>
</footer>


{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', () => {
  const wrapper = document.getElementById('timelineWrapper');
  const slides  = [...document.querySelectorAll('.year-slide')];
  const dotsBox = document.getElementById('yearIndicators');

  // 1) Build the dots
  const dots = slides.map((slide, i) => {
    const year = slide.dataset.year ?? i + 1;
    const btn = document.createElement('button');
    btn.type = 'button';
    btn.title = year;
    btn.setAttribute('aria-label', `Aller à ${year}`);
    btn.setAttribute('aria-current', i === 0 ? 'true' : 'false');
    btn.addEventListener('click', () => {
      slide.scrollIntoView({ behavior: 'smooth', inline: 'start', block: 'nearest' });
    });
    dotsBox.appendChild(btn);
    return btn;
  });

  // 2) Mark a dot as active
  function setActive(index){
    dots.forEach((d, i) => d.setAttribute('aria-current', i === index ? 'true' : 'false'));
  }

  // 3) Observe which slide is centered (most visible in wrapper)
  const io = new IntersectionObserver((entries) => {
    // pick the entry with the largest intersection ratio
    const visible = entries
      .filter(e => e.isIntersecting)
      .sort((a,b) => b.intersectionRatio - a.intersectionRatio)[0];

    if (!visible) return;
    const index = slides.indexOf(visible.target);
    if (index >= 0) setActive(index);
  }, {
    root: wrapper,
    threshold: [0.5, 0.6, 0.7] // become active when ~60% visible
  });

  slides.forEach(s => io.observe(s));

  // 4) As a safety net for browsers with flaky IO + momentum scrolling,
  //    refresh active dot at the end of a scroll.
  let raf;
  wrapper.addEventListener('scroll', () => {
    cancelAnimationFrame(raf);
    raf = requestAnimationFrame(() => {
      // find the slide whose left edge is closest to wrapper.scrollLeft
      const lefts = slides.map(s => Math.abs(s.offsetLeft - wrapper.scrollLeft));
      const idx = lefts.indexOf(Math.min(...lefts));
      setActive(idx);
    });
  }, { passive: true });
});
</script>

{% endblock %}

